---
phase: 07-contact-careers
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/routes/pages/Careers.tsx
  - src/routes/index.tsx
  - src/components/careers/CVUploadForm.tsx
  - src/components/careers/JobListings.tsx
  - src/components/careers/JobCard.tsx
  - src/components/careers/JobDetailModal.tsx
  - src/components/careers/schemas/cv-upload-schema.ts
  - src/components/careers/data/jobs.ts
  - src/locales/en/careers.json
  - src/locales/ar/careers.json
autonomous: true

must_haves:
  truths:
    - "User can see job listings displayed as cards"
    - "User can click a job card to see full details in modal"
    - "User can upload CV via drag-and-drop dropzone"
    - "CV upload validates file type (PDF, Word, images) and size (10MB max)"
    - "Success/error feedback displays after CV submission"
  artifacts:
    - path: "src/routes/pages/Careers.tsx"
      provides: "Careers page component"
      min_lines: 40
    - path: "src/components/careers/CVUploadForm.tsx"
      provides: "CV submission form with dropzone"
      min_lines: 100
    - path: "src/components/careers/JobListings.tsx"
      provides: "Job cards grid component"
      min_lines: 30
    - path: "src/components/careers/JobCard.tsx"
      provides: "Individual job card component"
      min_lines: 30
    - path: "src/components/careers/JobDetailModal.tsx"
      provides: "Job detail modal with Apply button"
      min_lines: 50
    - path: "src/components/careers/schemas/cv-upload-schema.ts"
      provides: "Zod schema for CV upload validation"
      exports: ["cvUploadSchema", "CVUploadFormData"]
    - path: "src/locales/en/careers.json"
      provides: "English careers translations"
      contains: "uploadTitle"
  key_links:
    - from: "src/components/careers/CVUploadForm.tsx"
      to: "react-dropzone"
      via: "useDropzone hook"
      pattern: "useDropzone"
    - from: "src/components/careers/CVUploadForm.tsx"
      to: "src/components/careers/schemas/cv-upload-schema.ts"
      via: "zodResolver import"
      pattern: "zodResolver.*cvUploadSchema"
    - from: "src/routes/index.tsx"
      to: "src/routes/pages/Careers.tsx"
      via: "route import"
      pattern: "CareersPage"
---

<objective>
Create Careers page with job listings and CV upload form.

Purpose: Enable users to browse open positions and submit their CVs for consideration at Jerash.

Output: CareersPage at /careers route with job listings grid, job detail modal, and CV upload form with drag-and-drop support.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/07-contact-careers/07-CONTEXT.md
@.planning/phases/07-contact-careers/07-RESEARCH.md

# Existing patterns
@src/routes/index.tsx
@src/components/ui/dialog.tsx
@src/components/ui/card.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install react-dropzone and create CV upload schema with job data</name>
  <files>
    src/components/careers/schemas/cv-upload-schema.ts
    src/components/careers/data/jobs.ts
    src/locales/en/careers.json
    src/locales/ar/careers.json
  </files>
  <action>
    **Install react-dropzone:**
    ```bash
    pnpm add react-dropzone
    ```

    **Create src/components/careers/schemas/cv-upload-schema.ts:**
    - Define constants:
      - MAX_FILE_SIZE = 10 * 1024 * 1024 (10MB)
      - ACCEPTED_TYPES = ['application/pdf', 'application/msword', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document', 'image/jpeg', 'image/jpg', 'image/png']
      - ACCEPTED_EXTENSIONS = ['.pdf', '.doc', '.docx', '.jpg', '.jpeg', '.png']
    - Define cvUploadSchema with fields:
      - name: z.string().min(1) with error key 'validation.nameRequired'
      - email: z.email() with error key 'validation.emailInvalid'
      - phone: z.string().min(1) with error key 'validation.phoneRequired'
      - cv: z.instanceof(File) with 3 refinements:
        - Size check (MAX_FILE_SIZE) with error key 'validation.fileTooLarge'
        - MIME type check (ACCEPTED_TYPES) with error key 'validation.fileInvalidType'
        - Extension check (ACCEPTED_EXTENSIONS) with error key 'validation.fileInvalidExtension'
    - Export CVUploadFormData type using z.infer

    **Create src/components/careers/data/jobs.ts:**
    - Define Job interface: id, titleKey, departmentKey, locationKey, typeKey, descriptionKey, fullDescriptionKey
    - Create jobs array with 4-6 placeholder jobs (Claude's discretion per CONTEXT):
      - Petroleum Engineer (Engineering, Basrah, Full-time)
      - HSE Officer (HSE, Erbil, Full-time)
      - Wireline Operator (Operations, Basrah, Full-time)
      - Accountant (Finance, Baghdad, Full-time)
      - (optionally 1-2 more)
    - Use translation keys for all text fields (titleKey points to careers.jobs.petroleumEngineer.title, etc.)

    **Create src/locales/en/careers.json:**
    - Page title and description
    - Job listings section title
    - Job card labels: department, location, type, viewDetails
    - Modal: applyButton, closeButton
    - CV upload section: uploadTitle, uploadDescription
    - Dropzone: placeholder ("Drag and drop your CV here, or click to select"), acceptedFormats, maxSize
    - Form labels: name, email, phone
    - Submit button, submitting state
    - Success title and message
    - Validation errors: nameRequired, emailInvalid, phoneRequired, fileRequired, fileTooLarge, fileInvalidType, fileInvalidExtension
    - Job data for each job (title, department, location, type, description, fullDescription)

    **Create src/locales/ar/careers.json:**
    - Arabic translations for all above keys
    - Arabic job titles and descriptions
  </action>
  <verify>
    - pnpm list react-dropzone shows installed
    - ls src/components/careers/schemas/cv-upload-schema.ts exists
    - ls src/components/careers/data/jobs.ts exists
    - ls src/locales/en/careers.json exists
    - ls src/locales/ar/careers.json exists
  </verify>
  <done>
    react-dropzone installed, CV upload schema with multi-layer file validation, static job data with translation keys, bilingual careers translations
  </done>
</task>

<task type="auto">
  <name>Task 2: Create CVUploadForm, JobCard, JobDetailModal, JobListings, and Careers page</name>
  <files>
    src/components/careers/CVUploadForm.tsx
    src/components/careers/JobCard.tsx
    src/components/careers/JobDetailModal.tsx
    src/components/careers/JobListings.tsx
    src/routes/pages/Careers.tsx
    src/routes/index.tsx
  </files>
  <action>
    **Create src/components/careers/JobCard.tsx:**
    - Props: job (Job type), onClick handler
    - Card with CardHeader (title) and CardContent (department, location, type badges)
    - Brief description text below badges
    - Hover effect using brightness-110 (consistent with gallery pattern)
    - Cursor pointer, onClick triggers modal open
    - Use t() with job key paths to get translated content

    **Create src/components/careers/JobDetailModal.tsx:**
    - Props: job (Job | null), open, onOpenChange
    - Uses Dialog, DialogContent, DialogHeader, DialogTitle from shadcn/ui
    - Shows full job details: title, department/location/type badges, full description
    - "Apply" button at bottom scrolls to CV upload form (per CONTEXT: closes modal, scrolls to #cv-upload)
    - Use motion.div for content animation (fade in)
    - Reset any internal state on close (modal state persisting pitfall from RESEARCH)

    **Create src/components/careers/JobListings.tsx:**
    - Import jobs from data/jobs.ts
    - State for selectedJob (Job | null)
    - Grid layout: md:grid-cols-2 lg:grid-cols-3 gap-6
    - Map jobs to JobCard components, onClick sets selectedJob
    - Render JobDetailModal with selectedJob, open when selectedJob !== null
    - onOpenChange clears selectedJob when closed

    **Create src/components/careers/CVUploadForm.tsx:**
    - Use useForm with zodResolver(cvUploadSchema)
    - Provide defaultValues: name: '', email: '', phone: '', cv: undefined
    - Name, email, phone fields use shadcn/ui Input
    - CV field uses Controller component to integrate react-dropzone:
      - useDropzone with accept object for PDF/Word/images
      - maxFiles: 1
      - onDrop callback calls field.onChange(acceptedFiles[0])
      - Dropzone UI: dashed border, changes color on isDragActive
      - Shows file name when file selected, or placeholder text when empty
      - Error styling when field has error
    - Simulate submission with setTimeout(1500ms), log to console
    - Track isSubmitting and showSuccess states
    - AnimatePresence to switch between form and success message
    - Add id="cv-upload" to container for scroll targeting from job modal

    **Create src/routes/pages/Careers.tsx:**
    - Import FadeIn, StaggerContainer from animations
    - Page header with title and description
    - Two main sections:
      1. Job Listings section (JobListings component)
      2. CV Upload section (CVUploadForm component in Card)
    - Use react-helmet-async for SEO meta tags
    - Consistent page structure with other pages (Container wrapper, proper spacing)

    **Update src/routes/index.tsx:**
    - Import CareersPage from './pages/Careers'
    - Add route: { path: 'careers', element: <CareersPage /> }
  </action>
  <verify>
    - pnpm build completes without errors
    - pnpm dev, navigate to /careers
    - Job cards display in grid
    - Click job card - modal opens with full details
    - Click "Apply" in modal - modal closes, page scrolls to CV form
    - Drag file into dropzone - file name appears
    - Submit form without file - validation error appears
    - Try uploading file over 10MB or wrong type - validation error
    - Fill valid data + valid file, submit - success message appears
    - Switch language - all content changes to Arabic including job listings
  </verify>
  <done>
    Careers page accessible at /careers with job listings grid, job detail modal with Apply button, CV upload form with drag-and-drop validation, bilingual support
  </done>
</task>

</tasks>

<verification>
1. Navigate to /careers - page loads with job listings and CV form
2. Click a job card - modal opens with full description
3. Click "Apply" in modal - modal closes, scrolls to CV form
4. Try dropping invalid file type - error message appears
5. Try dropping file over 10MB - error message appears
6. Drop valid PDF - file name displays in dropzone
7. Submit without required fields - validation errors appear
8. Fill all fields + valid file, submit - success message animates in
9. Switch to Arabic - all content changes including job data
10. pnpm build succeeds with no TypeScript errors
</verification>

<success_criteria>
- Job listings display as cards grid (4-6 static jobs)
- Job cards clickable, open modal with full details
- Modal has "Apply" button that scrolls to CV form
- CV dropzone accepts drag-and-drop
- File validation: PDF, Word, JPG, PNG allowed; 10MB max
- Multi-layer file validation (MIME type + extension + size)
- Form fields: name, email, phone (required), CV file (required)
- Success/error feedback with animations
- All content bilingual (Arabic/English)
- Route /careers accessible and renders CareersPage
</success_criteria>

<output>
After completion, create `.planning/phases/07-contact-careers/07-02-SUMMARY.md`
</output>
