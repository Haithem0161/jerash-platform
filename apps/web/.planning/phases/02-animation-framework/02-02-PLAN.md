---
phase: 02-animation-framework
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/layout/RootLayout.tsx
  - src/components/animations/hover.ts
  - src/components/animations/index.ts
autonomous: true

must_haves:
  truths:
    - "Page transitions animate smoothly between routes (fade out, fade in)"
    - "New page always starts at scroll position 0 after navigation"
    - "Hover effects respond instantly (~100ms) on interactive elements"
    - "Page transitions trigger on route changes, not just language changes"
  artifacts:
    - path: "src/components/layout/RootLayout.tsx"
      provides: "Page transitions keyed to pathname with scroll reset"
      contains: "location.pathname"
    - path: "src/components/animations/hover.ts"
      provides: "Reusable Tailwind class utilities for hover effects"
      exports: ["buttonHover", "cardHover", "linkHover"]
  key_links:
    - from: "src/components/layout/RootLayout.tsx"
      to: "react-router"
      via: "useLocation for pathname key"
      pattern: "useLocation.*pathname"
    - from: "src/components/layout/RootLayout.tsx"
      to: "motion/react"
      via: "AnimatePresence with onExitComplete"
      pattern: "onExitComplete.*scrollTo"
---

<objective>
Implement proper page transitions keyed to route changes and create reusable hover effect patterns for interactive elements.

Purpose: Ensure smooth navigation experience with consistent transition timing, automatic scroll-to-top behavior, and standardized hover feedback across all interactive elements.

Output: Updated RootLayout with route-based transitions and documented hover utilities for downstream component use.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-animation-framework/02-CONTEXT.md
@.planning/phases/02-animation-framework/02-RESEARCH.md
@FRAMER-MOTION.md
@src/components/layout/RootLayout.tsx
@src/components/layout/Navigation.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update RootLayout for proper page transitions</name>
  <files>
    src/components/layout/RootLayout.tsx
  </files>
  <action>
Update RootLayout.tsx to implement proper page transitions per RESEARCH.md pattern:

1. Import useLocation from 'react-router' (already have useTranslation)

2. Create composite key combining pathname and language:
   ```tsx
   const location = useLocation()
   const pageKey = `${location.pathname}-${i18n.language}`
   ```
   This ensures transitions happen on BOTH route changes AND language changes.

3. Update AnimatePresence:
   - Add `onExitComplete={() => window.scrollTo(0, 0)}` callback
   - This resets scroll after exit animation completes (CONTEXT.md: always start at top)

4. Update motion.main:
   - Change key from `{i18n.language}` to `{pageKey}`
   - Keep existing animation props (already correct):
     - initial={{ opacity: 0 }}
     - animate={{ opacity: 1 }}
     - exit={{ opacity: 0 }}
   - Update transition to use faster timing per CONTEXT.md:
     - transition={{ duration: 0.2, ease: 'easeOut' }}

Per CONTEXT.md decisions:
- Transition type: Fade (opacity crossfade) - already implemented
- Speed: Fast ~200ms - update if needed
- Sequential timing: mode="wait" - already set
- Scroll position: Reset to top after navigation - ADD onExitComplete
  </action>
  <verify>
    pnpm build succeeds
    grep -r "location.pathname" src/components/layout/RootLayout.tsx confirms route keying
    grep -r "onExitComplete" src/components/layout/RootLayout.tsx confirms scroll reset
  </verify>
  <done>
    Page transitions trigger on route changes (not just language)
    Scroll resets to top after navigation completes
    200ms fade transition provides fast, professional feel
  </done>
</task>

<task type="auto">
  <name>Task 2: Create hover effect utilities</name>
  <files>
    src/components/animations/hover.ts
    src/components/animations/index.ts
  </files>
  <action>
Create `src/components/animations/hover.ts` with documented Tailwind class utilities:

**hover.ts:**
```typescript
/**
 * Hover effect utilities using Tailwind classes.
 * Per CONTEXT.md: Use CSS transitions for hover (100ms), not Motion.
 * CSS is more performant for simple color/border changes.
 */

/** Buttons: color change only, no lift or scale */
export const buttonHover = 'transition-colors duration-100 hover:bg-primary/90'

/** Cards: border highlight on hover, no shadow/lift */
export const cardHover = 'border border-transparent transition-colors duration-100 hover:border-primary'

/** Cards with existing border: just color change */
export const cardBorderHover = 'transition-colors duration-100 hover:border-primary'

/**
 * Links: underline animation on hover
 * Note: Navigation.tsx already has this pattern implemented.
 * Use this for other link contexts.
 */
export const linkHover = [
  'relative',
  'after:absolute after:bottom-0 after:start-0',
  'after:h-0.5 after:bg-primary',
  'after:w-0 hover:after:w-full',
  'after:transition-all after:duration-300',
].join(' ')

/**
 * Icon buttons: subtle background on hover
 */
export const iconButtonHover = 'transition-colors duration-100 hover:bg-accent'
```

Per CONTEXT.md decisions:
- Response speed: Instant ~100ms (duration-100)
- Buttons: Color change only
- Cards: Border highlight
- Links: Underline animation (matching Phase 1 nav behavior)

**index.ts:**
- Add hover utilities to barrel exports: `export * from './hover'`

These utilities provide consistent hover patterns that downstream phases can import and use.
  </action>
  <verify>
    pnpm build succeeds
    grep -r "duration-100" src/components/animations/hover.ts confirms 100ms timing
    grep -r "buttonHover" src/components/animations/index.ts confirms export
  </verify>
  <done>
    Hover utilities exported for consistent 100ms interaction feedback
    buttonHover, cardHover, linkHover, iconButtonHover available for downstream use
    CSS-only approach ensures 60fps performance (no JS animation overhead)
  </done>
</task>

</tasks>

<verification>
After both tasks complete:
1. `pnpm build` succeeds with no errors
2. `pnpm lint` passes (or only pre-existing warnings)
3. Navigate between pages in dev server - should see fade transition
4. Change language - should see fade transition
5. After navigation, page should start at top (not middle scroll position)
</verification>

<success_criteria>
- [ ] RootLayout keys transitions on both pathname and language
- [ ] AnimatePresence has onExitComplete scroll reset callback
- [ ] Page transitions use 200ms duration with easeOut
- [ ] hover.ts exports buttonHover, cardHover, linkHover, iconButtonHover
- [ ] All hover effects use 100ms duration for instant feel
- [ ] Build succeeds with no TypeScript errors
</success_criteria>

<output>
After completion, create `.planning/phases/02-animation-framework/02-02-SUMMARY.md`
</output>
