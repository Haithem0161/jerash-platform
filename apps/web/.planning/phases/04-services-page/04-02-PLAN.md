---
phase: 04-services-page
plan: 02
type: execute
wave: 2
depends_on: ["04-01"]
files_modified:
  - src/components/ui/dialog.tsx
  - src/components/services/CategoryTabs.tsx
  - src/components/services/ServiceCard.tsx
  - src/components/services/ServiceModal.tsx
  - src/components/services/ServicesGrid.tsx
  - src/components/services/index.ts
  - src/routes/pages/Services.tsx
  - src/routes/index.tsx
autonomous: true

must_haves:
  truths:
    - "User can see all services in a grid layout"
    - "User can filter services by clicking category tabs"
    - "User can click a service card to see full details in modal"
    - "Category tab underline animates when switching"
    - "Grid cards animate in/out when filter changes"
    - "Service names display in current language (Arabic or English)"
  artifacts:
    - path: "src/components/services/CategoryTabs.tsx"
      provides: "Animated category filter tabs"
      exports: ["CategoryTabs"]
    - path: "src/components/services/ServiceCard.tsx"
      provides: "Individual service card"
      exports: ["ServiceCard"]
    - path: "src/components/services/ServiceModal.tsx"
      provides: "Service detail modal"
      exports: ["ServiceModal"]
    - path: "src/components/services/ServicesGrid.tsx"
      provides: "Filtered service grid with animations"
      exports: ["ServicesGrid"]
    - path: "src/routes/pages/Services.tsx"
      provides: "Services page route component"
      exports: ["ServicesPage", "default"]
  key_links:
    - from: "src/routes/pages/Services.tsx"
      to: "src/data/services.ts"
      via: "import services array"
      pattern: "import.*from.*@/data/services"
    - from: "src/components/services/CategoryTabs.tsx"
      to: "motion layoutId"
      via: "animated underline indicator"
      pattern: "layoutId.*category"
    - from: "src/components/services/ServicesGrid.tsx"
      to: "AnimatePresence"
      via: "filter transition animations"
      pattern: "AnimatePresence.*mode.*popLayout"
    - from: "src/routes/index.tsx"
      to: "/services route"
      via: "router configuration"
      pattern: "path.*services"
---

<objective>
Build the Services page UI components with animated tabs, filterable grid, and detail modal.

Purpose: Create the complete Services page experience where users can browse, filter, and explore all 26 services with smooth animations and bilingual support.

Output: Fully functional /services route with category filtering, animated card grid, and modal detail view.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-services-page/04-RESEARCH.md
@.planning/phases/04-services-page/04-CONTEXT.md
@.planning/phases/04-services-page/04-01-SUMMARY.md

# Existing patterns
@src/components/animations/FadeIn.tsx
@src/components/animations/StaggerContainer.tsx
@src/components/animations/variants.ts
@src/components/layout/Section.tsx
@src/components/home/ServicesPreview.tsx
@src/routes/index.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add shadcn Dialog and create service components</name>
  <files>
    src/components/ui/dialog.tsx
    src/components/services/CategoryTabs.tsx
    src/components/services/ServiceCard.tsx
    src/components/services/ServiceModal.tsx
    src/components/services/index.ts
  </files>
  <action>
1. Add shadcn Dialog component:
   ```bash
   pnpm dlx shadcn@latest add dialog
   ```

2. Create `src/components/services/CategoryTabs.tsx`:
   - Props: `activeCategory`, `onCategoryChange`
   - Categories: all | production | wireline | consultancy | other
   - Animated underline using `layoutId="services-category-underline"` (prefix to avoid collision)
   - Use `motion.span` for underline with spring transition
   - Horizontal flex layout with `gap` (auto-reverses in RTL)
   - Keyboard accessible (role="tablist", role="tab", aria-selected)
   - Uses `useTranslation('services')` for category labels

3. Create `src/components/services/ServiceCard.tsx`:
   - Props: `service: Service`, `onClick: () => void`
   - Displays icon, title, shortDescription
   - Styled as button with `rounded-lg border p-6 text-center`
   - Hover effect: `hover:border-primary hover:bg-muted/50`
   - Uses `useTranslation('services')` for text: `t(\`items.${service.id}.title\`)`
   - `line-clamp-2` for shortDescription

4. Create `src/components/services/ServiceModal.tsx`:
   - Props: `service: Service | null`, `open: boolean`, `onOpenChange: (open: boolean) => void`
   - Uses shadcn Dialog components
   - DialogHeader with icon + DialogTitle
   - DialogDescription with full description
   - Handles RTL: icon position uses flex with `rtl && 'flex-row-reverse'`
   - Returns null early if !service

5. Create `src/components/services/index.ts` barrel export:
   ```typescript
   export { CategoryTabs } from './CategoryTabs'
   export { ServiceCard } from './ServiceCard'
   export { ServiceModal } from './ServiceModal'
   export { ServicesGrid } from './ServicesGrid'
   ```
  </action>
  <verify>
    - `pnpm tsc --noEmit` passes
    - All components export correctly
    - Dialog component exists at src/components/ui/dialog.tsx
  </verify>
  <done>
    - shadcn Dialog added to project
    - CategoryTabs renders tabs with animated underline
    - ServiceCard renders service preview
    - ServiceModal renders full service details
    - All components handle RTL
  </done>
</task>

<task type="auto">
  <name>Task 2: Create ServicesGrid and Services page</name>
  <files>
    src/components/services/ServicesGrid.tsx
    src/routes/pages/Services.tsx
    src/routes/index.tsx
  </files>
  <action>
1. Create `src/components/services/ServicesGrid.tsx`:
   - Props: `services: Service[]`, `onServiceClick: (service: Service) => void`
   - Uses `motion.div` with `layout` for parent
   - Uses `AnimatePresence mode="popLayout"` for filter transitions
   - Grid classes: `grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6`
   - Parent has `style={{ position: 'relative' }}` for popLayout to work
   - Each item wrapped in `motion.div` with:
     - `key={service.id}` (stable ID, not index)
     - `layout`
     - `initial={{ opacity: 0, scale: 0.9 }}`
     - `animate={{ opacity: 1, scale: 1 }}`
     - `exit={{ opacity: 0, scale: 0.9 }}`
     - `transition={{ duration: 0.3, delay: Math.min(index * 0.05, 0.5) }}` (capped stagger)

2. Create `src/routes/pages/Services.tsx`:
   - State: `activeCategory` (FilterCategory), `selectedService` (Service | null), `modalOpen` (boolean)
   - Uses `useCallback` for handlers (handleServiceClick, handleCategoryChange)
   - Filtering: `activeCategory === 'all' ? services : services.filter(s => s.category === activeCategory)`
   - Layout:
     - SEO component with title/description
     - Section wrapper (no fullWidth - use Container)
     - FadeIn for page title: "Our Services" / "خدماتنا"
     - FadeIn for CategoryTabs
     - ServicesGrid with filtered services
     - ServiceModal outside Section (portal renders to body anyway)
   - No hero section per CONTEXT.md

3. Update `src/routes/index.tsx`:
   - Add services route:
     ```typescript
     {
       path: 'services',
       element: <ServicesPage />,
     }
     ```
   - Import: `import { ServicesPage } from './pages/Services'`
  </action>
  <verify>
    - `pnpm tsc --noEmit` passes
    - `pnpm dev` starts without errors
    - Navigate to /services shows the page
    - Clicking tabs filters the grid
    - Clicking a card opens modal with details
  </verify>
  <done>
    - ServicesGrid displays all services in responsive grid
    - Filter animation smoothly transitions cards
    - Services page accessible at /services
    - Full user flow works: browse -> filter -> click -> view detail -> close
  </done>
</task>

<task type="auto">
  <name>Task 3: Test and verify bilingual functionality</name>
  <files>None (testing existing)</files>
  <action>
Test the complete Services page flow:

1. **Navigation test:**
   - Visit http://localhost:5173/services
   - Verify page loads without errors

2. **English mode:**
   - Page title shows "Our Services"
   - Category tabs show: All | Production | Wireline | Consultancy | Other
   - Click "Production" - grid shows only production services
   - Click a card - modal opens with English title and description
   - Close modal (click X or backdrop)

3. **Arabic mode:**
   - Switch language to Arabic
   - Page title shows "خدماتنا"
   - Category tabs show Arabic labels
   - Cards show Arabic titles
   - Modal shows Arabic content
   - Layout is RTL (tabs and modal content properly mirrored)

4. **Animation test:**
   - Tab underline slides smoothly between tabs
   - Cards animate in/out when filtering
   - Modal has smooth open/close animation

5. **Console check:**
   - No errors or warnings in browser console
   - No missing translation warnings
  </action>
  <verify>
    - All 26 services display in "All" tab
    - Filtering shows correct count per category (8 production, 7 wireline, 8 consultancy, 3 other)
    - Bilingual content displays correctly
    - RTL layout works for Arabic
    - No console errors
  </verify>
  <done>
    - Complete Services page functional in both languages
    - All animations perform smoothly
    - All requirements (SERV-01 through SERV-05) satisfied
  </done>
</task>

</tasks>

<verification>
After completing all tasks:

1. Type check: `pnpm tsc --noEmit`
2. Lint: `pnpm lint`
3. Build: `pnpm build`
4. Manual testing:
   - /services route loads
   - 26 services visible in "All" tab
   - Category filtering works (Production: 8, Wireline: 7, Consultancy: 8, Other: 3)
   - Card click opens modal with full description
   - Language switch updates all content
   - RTL layout correct in Arabic
5. No console errors or missing translation warnings
</verification>

<success_criteria>
- SERV-01: Services organized in 4 categories (tabs work)
- SERV-02: Cards expand on click (modal opens with details)
- SERV-03: Filter by category (tabs filter the grid)
- SERV-04: All 26 services from company profile displayed
- SERV-05: Bilingual names and descriptions (AR/EN work)
- Animations smooth (tab underline, grid filtering)
- Build passes, no lint errors
</success_criteria>

<output>
After completion, create `.planning/phases/04-services-page/04-02-SUMMARY.md`
</output>
