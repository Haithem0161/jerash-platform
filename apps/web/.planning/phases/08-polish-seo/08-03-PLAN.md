---
phase: 08-polish-seo
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/common/SkipLinks.tsx
  - src/components/layout/RootLayout.tsx
  - src/App.css
  - eslint.config.js
  - package.json
  - src/components/layout/Header.tsx
  - src/components/layout/Footer.tsx
  - src/locales/en/translation.json
  - src/locales/ar/translation.json
autonomous: false

must_haves:
  truths:
    - "Keyboard user can tab to 'Skip to main content' link on any page"
    - "Focus states are visible with 2px ring outline on interactive elements"
    - "Main content area has id='main-content' for skip link target"
    - "ESLint catches accessibility issues in JSX"
  artifacts:
    - path: "src/components/common/SkipLinks.tsx"
      provides: "Skip navigation links"
      contains: "Skip to"
    - path: "src/App.css"
      provides: "Global focus-visible styles"
      contains: "focus-visible"
    - path: "eslint.config.js"
      provides: "jsx-a11y plugin rules"
      contains: "jsx-a11y"
  key_links:
    - from: "src/components/layout/RootLayout.tsx"
      to: "src/components/common/SkipLinks.tsx"
      via: "SkipLinks component import"
      pattern: "<SkipLinks"
    - from: "src/components/common/SkipLinks.tsx"
      to: "#main-content"
      via: "href anchor link"
      pattern: "main-content"
---

<objective>
Complete accessibility compliance with skip links, focus states, and semantic HTML.

Purpose: Enable keyboard and screen reader users to navigate the site efficiently, meeting WCAG 2.2 AA requirements.
Output: Skip links component, enhanced focus indicators, semantic landmarks, a11y linting.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/08-polish-seo/08-CONTEXT.md
@.planning/phases/08-polish-seo/08-RESEARCH.md
@src/components/layout/RootLayout.tsx
@src/App.css
@eslint.config.js
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create SkipLinks component and add semantic landmarks</name>
  <files>
    src/components/common/SkipLinks.tsx
    src/components/layout/RootLayout.tsx
    src/components/layout/Header.tsx
    src/components/layout/Footer.tsx
    src/locales/en/translation.json
    src/locales/ar/translation.json
  </files>
  <action>
1. Create src/components/common/SkipLinks.tsx:
   ```typescript
   import { useTranslation } from 'react-i18next'

   /**
    * Skip navigation links for keyboard/screen reader users.
    * Hidden by default, visible on focus (Tab key).
    * Must be first focusable element on page.
    */
   export function SkipLinks() {
     const { t } = useTranslation()

     return (
       <div className="absolute left-0 top-0 z-[100]">
         <a
           href="#main-content"
           className="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-[100] focus:bg-primary focus:text-primary-foreground focus:px-4 focus:py-2 focus:rounded-md focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:ring-offset-background focus:outline-none"
         >
           {t('accessibility.skipToMain', 'Skip to main content')}
         </a>
         <a
           href="#footer"
           className="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-56 focus:z-[100] focus:bg-primary focus:text-primary-foreground focus:px-4 focus:py-2 focus:rounded-md focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:ring-offset-background focus:outline-none"
         >
           {t('accessibility.skipToFooter', 'Skip to footer')}
         </a>
       </div>
     )
   }
   ```

2. Update RootLayout.tsx:
   - Import and add SkipLinks as first child
   - Add id="main-content" to the main element
   - Wrap content in semantic structure

   ```typescript
   import { SkipLinks } from '@/components/common/SkipLinks'

   export function RootLayout() {
     // ... existing code

     return (
       <>
         <SkipLinks />
         <LoadingOverlay />
         <div className="relative flex min-h-screen w-full flex-col">
           <Header />
           <AnimatePresence mode="wait" onExitComplete={() => window.scrollTo(0, 0)}>
             <motion.main
               id="main-content"
               key={pageKey}
               className="flex-1"
               // ... rest of motion props
             >
               <Outlet />
             </motion.main>
           </AnimatePresence>
           <Footer />
         </div>
       </>
     )
   }
   ```

3. Update Header.tsx:
   - Add id="navigation" to the nav element (if not present)
   - Ensure nav has aria-label="Main navigation" or similar

4. Update Footer.tsx:
   - Add id="footer" to the footer element
   - Ensure footer has role="contentinfo" (native to <footer>)

5. Add accessibility translations to both translation files (en and ar):
   ```json
   "accessibility": {
     "skipToMain": "Skip to main content",
     "skipToFooter": "Skip to footer"
   }
   ```

   Arabic:
   ```json
   "accessibility": {
     "skipToMain": "تخطي إلى المحتوى الرئيسي",
     "skipToFooter": "تخطي إلى التذييل"
   }
   ```
  </action>
  <verify>
    `pnpm build` passes
    Press Tab on page load - first focus shows "Skip to main content" link
    Click skip link - focus moves to main content area
    Run Lighthouse accessibility audit - no skip link warnings
  </verify>
  <done>
    SkipLinks component created with bilingual text
    RootLayout includes SkipLinks before all content
    main has id="main-content", footer has id="footer"
    Skip links work via Tab navigation
  </done>
</task>

<task type="auto">
  <name>Task 2: Add focus styles and accessibility linting</name>
  <files>
    src/App.css
    eslint.config.js
    package.json
  </files>
  <action>
1. Install eslint-plugin-jsx-a11y:
   ```bash
   pnpm add -D eslint-plugin-jsx-a11y
   ```

2. Update eslint.config.js to add jsx-a11y rules:
   ```javascript
   import js from '@eslint/js'
   import globals from 'globals'
   import reactHooks from 'eslint-plugin-react-hooks'
   import reactRefresh from 'eslint-plugin-react-refresh'
   import tseslint from 'typescript-eslint'
   import { defineConfig, globalIgnores } from 'eslint/config'
   import jsxA11y from 'eslint-plugin-jsx-a11y'

   export default defineConfig([
     globalIgnores(['dist']),
     {
       files: ['**/*.{ts,tsx}'],
       extends: [
         js.configs.recommended,
         tseslint.configs.recommended,
         reactHooks.configs.flat.recommended,
         reactRefresh.configs.vite,
       ],
       plugins: {
         'jsx-a11y': jsxA11y,
       },
       languageOptions: {
         ecmaVersion: 2020,
         globals: globals.browser,
       },
       rules: {
         // Accessibility rules - warn for now, fix incrementally
         'jsx-a11y/alt-text': 'warn',
         'jsx-a11y/anchor-has-content': 'warn',
         'jsx-a11y/anchor-is-valid': 'warn',
         'jsx-a11y/click-events-have-key-events': 'warn',
         'jsx-a11y/heading-has-content': 'warn',
         'jsx-a11y/html-has-lang': 'warn',
         'jsx-a11y/img-redundant-alt': 'warn',
         'jsx-a11y/interactive-supports-focus': 'warn',
         'jsx-a11y/label-has-associated-control': 'warn',
         'jsx-a11y/no-autofocus': 'warn',
         'jsx-a11y/no-noninteractive-element-interactions': 'warn',
         'jsx-a11y/no-static-element-interactions': 'warn',
         'jsx-a11y/role-has-required-aria-props': 'warn',
         'jsx-a11y/role-supports-aria-props': 'warn',
       },
     },
   ])
   ```

3. Update src/App.css to add global focus-visible styles:
   Add after the existing @layer base block:

   ```css
   @layer base {
     /* ... existing base styles ... */

     /* WCAG 2.2 AA Focus Indicators
      * 2px ring with sufficient contrast (3:1 minimum)
      * Uses focus-visible to only show for keyboard navigation
      */
     :focus-visible {
       @apply outline-none ring-2 ring-primary ring-offset-2 ring-offset-background;
     }

     /* Ensure focus is visible on dark backgrounds */
     .dark :focus-visible {
       @apply ring-primary ring-offset-background;
     }

     /* Interactive elements: buttons, links, inputs */
     a:focus-visible,
     button:focus-visible,
     input:focus-visible,
     select:focus-visible,
     textarea:focus-visible,
     [role="button"]:focus-visible,
     [tabindex]:focus-visible {
       @apply outline-none ring-2 ring-primary ring-offset-2 ring-offset-background;
     }
   }
   ```

4. Run lint to check for accessibility issues:
   ```bash
   pnpm lint
   ```

   Note: Warnings are expected. The goal is to surface issues, not block builds. Fix critical ones (missing alt text on images) if time permits, but most are informational.
  </action>
  <verify>
    `pnpm lint` runs and shows jsx-a11y warnings (not errors blocking build)
    `pnpm build` still passes
    Tab through page - all interactive elements have visible focus ring
    Focus ring has sufficient contrast against both light and dark backgrounds
  </verify>
  <done>
    eslint-plugin-jsx-a11y installed and configured with warning rules
    Global focus-visible styles added for keyboard navigation
    Focus indicators meet WCAG 2.2 AA requirements (2px ring, 3:1 contrast)
    Lint surfaces accessibility warnings for future fixes
  </done>
</task>

<task type="checkpoint:human" gate="blocking">
  <name>Task 3: Review and fix critical accessibility issues</name>
  <what-built>
    Skip links component is created and integrated. Focus styles are applied globally.
    ESLint jsx-a11y plugin is configured and will report accessibility warnings.
  </what-built>
  <how-to-verify>
    After Tasks 1-2 complete, perform accessibility review:

    1. Run `pnpm lint` and review jsx-a11y warnings
       - Note which files have warnings
       - Identify CRITICAL issues (missing alt text, missing labels, buttons without text)

    2. Run Lighthouse accessibility audit:
       - `pnpm preview` then open browser
       - DevTools > Lighthouse > Accessibility
       - Review any issues with score impact

    3. Decide which issues to fix now vs defer:
       - CRITICAL (fix now): Missing alt text on visible images, form labels, button accessible names
       - DEFER: Complex ARIA patterns, minor semantic improvements, third-party component issues

    4. For each critical issue, provide guidance:
       - File path and line number
       - What to add (e.g., "add alt='Oil field equipment' to img on line 45")

    After review, Claude will fix the identified critical issues.
  </how-to-verify>
  <resume-signal>
    Provide list of critical fixes needed, OR type "a11y pass" if Lighthouse score >= 90 and no critical issues found
  </resume-signal>
</task>

</tasks>

<verification>
1. Build succeeds: `pnpm build`
2. Lint runs: `pnpm lint` (warnings OK, no errors)
3. Skip links test:
   - Load any page, press Tab
   - "Skip to main content" link appears
   - Press Enter - focus moves to main content area
4. Focus states test:
   - Tab through page
   - All buttons, links, inputs have visible 2px ring on focus
5. Lighthouse audit:
   - Run on homepage: DevTools > Lighthouse > Accessibility
   - Score >= 90
   - No critical errors
</verification>

<success_criteria>
- SkipLinks component renders on all pages
- Tab key reveals skip links, links work correctly
- Focus-visible styles applied globally (2px ring)
- eslint-plugin-jsx-a11y configured and running
- Critical accessibility issues identified and fixed (via checkpoint)
- Lighthouse accessibility score >= 90
- Semantic HTML: main has id, footer has id, nav has aria-label
</success_criteria>

<output>
After completion, create `.planning/phases/08-polish-seo/08-03-SUMMARY.md`
</output>
